<html class="h-full">
    <head>
        <link rel="stylesheet" href="../static/css/output.css">
        <script  src="https://code.jquery.com/jquery-3.1.1.min.js"   integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="   crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="icon" class="fixed p-10 py-5 bg-gray-50 z-50 h-fit w-full">
            <div class="flex w-2/5   justify-between">
                <div>
                    <a class="relative w-fit h-fit" href="/">
                        <img class="h-[60px] w-auto" src="../static/logo.svg">
                    </a>
                </div>
                <div class="my-auto cursor-pointer">
                    <p class="text-3xl my-auto hover:border-b-2 hover:border-b-black"> 基本設定 </p>
                </div>
                <div class="my-auto cursor-pointer">
                    <p class="text-3xl my-auto hover:border-b-2 hover:border-b-black"> 測資設定 </p>
                </div>
                <div class="my-auto cursor-pointer">
                    <p class="text-3xl my-auto hover:border-b-2 hover:border-b-black"> 程式測試 </p>
                </div>
            </div>
        </div>
        <div class="relative w-full text-center bg-white flex min-h-full pt-24">
            <div class="flex flex-col justify-start gap-10 w-[50%]">
                <div class="p-10">
                    <p class="font-bold text-5xl m-5 text-left"> 題目敘述 </p>
                    <div class="flex flex-col gap-5 p-5 text-left">
                        <input type="text" class="w-full bg-slate-100 text-base p-2 px-4 appearance-none border-2 rounded focus:outline-none focus:border-orange-500 focus:bg-white" placeholder="題目名稱">
                        <textarea class="h-[200px] bg-slate-100 p-2 text-base px-4 border-2 appearance-none resize-none overflow-y-hidden rounded focus:outline-none focus:border-orange-500 focus:bg-white" placeholder="題目敘述"></textarea>
                        <textarea class="h-[200px] bg-slate-100 p-2 text-base px-4 border-2 appearance-none resize-none overflow-y-hidden rounded focus:outline-none focus:border-orange-500 focus:bg-white" placeholder="輸入說明"></textarea>
                        <textarea class="h-[200px] bg-slate-100 p-2 text-base px-4 border-2 appearance-none resize-none overflow-y-hidden rounded focus:outline-none focus:border-orange-500 focus:bg-white" placeholder="輸出說明"></textarea>
                        <textarea class="h-[200px] bg-slate-100 p-2 text-base px-4 border-2 appearance-none resize-none overflow-y-hidden rounded focus:outline-none focus:border-orange-500 focus:bg-white" placeholder="備注"></textarea>
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-start gap-10 w-[50%]">
                <div class="p-10">
                    <p class="font-bold text-5xl m-5 text-left"> 題目設定 </p>
                    <div class="flex flex-col gap-5 p-5">
                        <div class="w-full flex items-center">
                            <label class="text-right w-1/6"> 觀看權限 </label>
                            <select class="ml-10 w-3/5 bg-slate-100 p-2 text-base px-4 border-2">
                                <option value="1"> 僅限自己 </option>
                                <option value="2"> 公開 </option>
                            </select>
                        </div>
                        <div class="w-full flex items-center">
                            <label class="text-right w-1/6"> 題目限時(秒) 
                            </label>
                            <input type="text" class="ml-10 w-3/5 bg-slate-100 p-2 text-base px-4 border-2 appearance-none resize-none overflow-y-hidden rounded focus:outline-none focus:border-orange-500 focus:bg-white">
                        </div>
                        <div class="w-full flex items-center">
                            <label class="text-right w-1/6"> 題目記憶體(MB) 
                            </label>
                            <input type="text" class="ml-10 w-3/5 bg-slate-100 p-2 text-base px-4 border-2 appearance-none resize-none overflow-y-hidden rounded focus:outline-none focus:border-orange-500 focus:bg-white">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>
        document.body.addEventListener('keydown', (e) => {
            if(e.ctrlKey && e.key === "s"){

                dataJson = {}
                dataJson["problemContent"] = {}
                dataJson["basicSetting"] = {}
                dataJson["problemContent"]["title"] = document.getElementsByTagName("input")[0].value
                dataJson["problemContent"]["description"] = document.getElementsByTagName("textarea")[0].value
                dataJson["problemContent"]["input"] = document.getElementsByTagName("textarea")[1].value
                dataJson["problemContent"]["output"] = document.getElementsByTagName("textarea")[2].value
                dataJson["problemContent"]["note"] = document.getElementsByTagName("textarea")[3].value
                dataJson["basicSetting"]["permission"] = document.getElementsByTagName("select")[0].value
                dataJson["basicSetting"]["timeLimit"] = document.getElementsByTagName("input")[1].value
                dataJson["basicSetting"]["memoryLimit"] = document.getElementsByTagName("input")[2].value

                $.ajax({
                    url: "./queryProblemID",
                    type: "GET",
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    success(resp, textStatus, xhr){
                        console.log(resp)
                        dataJson["problemID"] = resp["Result"]["Count"] + 1
                        $.ajax({
                            url: "./add_problem",
                            data: JSON.stringify(dataJson),
                            type: "POST",
                            dataType: "json",
                            contentType: "application/json;charset=utf-8",
                            success(resp, textStatus, xhr){
                                console.log(resp)
                            }
                        })
                    }
                })
                e.preventDefault();
            }
        })
    </script>
</html>